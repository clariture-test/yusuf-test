function Devices(){}Devices.prototype=options;var devices=new Devices;devices._select=function(a){options.clear_all();options._select.call(this,a);map.clear();map.select(a)};devices._deselect=function(a){options._deselect.call(this,a);map.deselect(a)};function show_selected(){devices.show_selected()}function clear_all(){devices.clear_all();map.clear()}function assign_issue(a,b){$.post("assign/",{issue_id:a,assignee:b},function(a){}).done(function(){$("#issues").load("list/")})}
function delete_issue_assigned(a){$.post("delete/",{issue_id:a},function(a){}).done(function(){$("#issues").load("list/")})}function response_issue(a,b){$.post("response/",{issue_id:a,response:b},function(a){}).done(function(){$("#issues").load("list/")})}
function submit_create_issue(){var a="",b="",d=$("#create_issue_label").text(),e=$("#assignee").val(),f=$("#desc").val();$("input[name = 'name_issue_type']").each(function(){$(this).is(":checked")&&(a+=$(this).val()+", ")});var c=$("#issue_type_other").val(),a=c?a+c:a.slice(0,-2);$("input[name = 'name_issue_carrier']").each(function(){$(this).is(":checked")&&(b+=$(this).val()+", ")});b&&(b=b.slice(0,-2));$.post("create/",{device:d,issue_type:a,carrier:b,assignee:e,desc:f},function(a){}).done(function(){$("#issues").load("list/");
clear_all()});hide_create_issue_modal()}function hide_create_issue_modal(){$("#create_issue_modal").modal("hide");$("#desc").val("");$("#issue_type_other").val("");$("input[name = 'name_issue_type']").each(function(){$(this).prop("checked",!1)});$("input[name = 'name_issue_carrier']").each(function(){$(this).prop("checked",!1)})}
function append_selected_sites(a){if(devices.selected.length){for(name in devices.selected.hash)a.append('<input type="hidden" name="option_list" value="'+name+'" />');return!0}return!1}function post_report(a){var b=$("#select_form");(select_flag=append_selected_sites(b))?($("#action").val(a),$.post("/reports/",b.serialize(),function(a){}),clear_all()):$("#select_one").dialog({modal:!0})}function health_check(){post_report("H")}
function trending_report(){var a=$("#id_report_date").val()+" 12:00 am";if(moment(a,"MM/DD/YYYY hh:mm a",!0).isValid()){$("#trending_modal").modal("hide");$("#trending_date_error").hide();var b=$("#select_form");b.append('<input type="hidden" name="start_time" value="'+a+'" />');a=$("#carrier").val();b.append('<input type="hidden" name="carrier" value="'+a+'" />');post_report("TR")}else $("#trending_date_error").show()}
function create_issue_modal(){if(devices.selected.length)for(name in devices.selected.hash)$("#create_issue_label").text(name),$.get("/network/sites/"+name+"/",function(a){$("#site_detail_body").html(a)}),$.get("/network/sites/weather/"+name+"/",function(a){$("#weather_div").append(a)}),$("#create_issue_modal").modal("show");else $("#select_one").dialog({modal:!0})}function trending_modal(){$("#trending_modal").modal("show")}function bulk_select_modal(){$("#search").focus()}
$(document).ready(function(){$("#issues").load("list/");$(".form_datetime_trending").datetimepicker({pickTime:!1,minDate:moment(),defaultDate:moment()});$(".form_datetime_drive").datetimepicker({minDate:moment()});devices.initialize();devices.update()});
